<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Ugo Spark">
  
  <title>DataCamp Importing Data into Python 3 - ugo_py_doc</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "DataCamp Importing Data into Python 3";
    var mkdocs_page_input_path = "DataCamp Importing Data into Python 3.md";
    var mkdocs_page_url = "/DataCamp Importing Data into Python 3/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
  <script src="../mathjaxhelper.js"></script>

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> ugo_py_doc</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Apprenez%20a%20programmer%20en%20Python/">Apprenez à programmer en Python</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Automate%20the%20Boring%20Stuff%20with%20Python/">Automate the Boring Stuff with Python</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Codecademy%20Python/">Codecademy Python</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">DataCamp Importing Data into Python 3</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#1-importing-from-flat-files">1, Importing from Flat Files</a></li>
                
                    <li><a class="toctree-l4" href="#numpy">Numpy</a></li>
                
                    <li><a class="toctree-l4" href="#pandas">Pandas</a></li>
                
            
                <li class="toctree-l3"><a href="#2-importing-from-other-files">2, Importing from Other Files</a></li>
                
            
                <li class="toctree-l3"><a href="#3-working-with-relational-databases">3, Working with Relational Databases</a></li>
                
            
                <li class="toctree-l3"><a href="#4-importing-flat-files-from-the-web-web-scraping">4, Importing Flat Files from the Web (Web Scraping)</a></li>
                
            
                <li class="toctree-l3"><a href="#5-introduction-to-apis-and-jsons">5, Introduction to APIs and JSONs</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../DataCamp%20Python%203%20for%20Data%20Science/">DataCamp Python 3 for Data Science</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Decorators/">Decorators</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Introduction%20to%20Python/">Introduction to Python</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../IPython%20Notebook/">IPython Notebook, Collection</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Learn%20Python%20the%20Hard%20Way/">Learn Python the Hard Way</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Managing%20Your%20Biological%20Data%20with%20Python/">Managing Your Biological Data with Python</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Python%20Code%20Snippets/">Python Code Snippets</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Python%20for%20Education/">Python for Education</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Scientific%20Python%20%28Scipy%20Stack%29/">Scientific Python (Scipy Stack)</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">ugo_py_doc</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>DataCamp Importing Data into Python 3</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h3 id="datacamp-importing-data-into-python-3">DataCamp Importing Data into Python 3<a class="headerlink" href="#datacamp-importing-data-into-python-3" title="Permanent link">&para;</a></h3>
<p><strong>Foreword</strong></p>
<p>Code snippets and excerpts from the courses. Python 3. From DataCamp.</p>
<hr />
<div class="toc"><span class="toctitle">CONTENT</span><ul>
<li><a href="#datacamp-importing-data-into-python-3">DataCamp Importing Data into Python 3</a><ul>
<li><a href="#1-importing-from-flat-files">1, Importing from Flat Files</a><ul>
<li><a href="#numpy">Numpy</a></li>
<li><a href="#pandas">Pandas</a></li>
</ul>
</li>
<li><a href="#2-importing-from-other-files">2, Importing from Other Files</a></li>
<li><a href="#3-working-with-relational-databases">3, Working with Relational Databases</a></li>
<li><a href="#4-importing-flat-files-from-the-web-web-scraping">4, Importing Flat Files from the Web (Web Scraping)</a></li>
<li><a href="#5-introduction-to-apis-and-jsons">5, Introduction to APIs and JSONs</a></li>
</ul>
</li>
</ul>
</div>
<hr />
<h4 id="1-importing-from-flat-files">1, Importing from Flat Files<a class="headerlink" href="#1-importing-from-flat-files" title="Permanent link">&para;</a></h4>
<ul>
<li>Load the script and run it.</li>
</ul>
<pre><code class="python"># %load &quot;Importing Data in Python.py&quot;
file = open('moby_dick.txt', 'r')

# Print it
print(file.read())

# Check whether file is closed
print(file.closed)

# Close file
file.close()

# Check whether file is closed
print(file.closed)
</code></pre>

<pre><code>CHAPTER 1. Loomings.

Call me Ishmael. Some years ago--never mind how long precisely--having
little or no money in my purse, and nothing particular to interest me on
shore, I thought I would sail about a little and see the watery part of
the world. It is a way I have of driving off the spleen and regulating
the circulation. Whenever I find myself growing grim about the mouth;
whenever it is a damp, drizzly November in my soul; whenever I find
myself involuntarily pausing before coffin warehouses, and bringing up
the rear of every funeral I meet; and especially whenever my hypos get
such an upper hand of me, that it requires a strong moral principle to
prevent me from deliberately stepping into the street, and methodically
knocking people's hats off--then, I account it high time to get to sea
as soon as I can. This is my substitute for pistol and ball. With a
philosophical flourish Cato throws himself upon his sword; I quietly
take to the ship. There is nothing surprising in this. If they but knew
it, almost all men in their degree, some time or other, cherish very
nearly the same feelings towards the ocean with me.
False
True
</code></pre>
<pre><code class="python"># Read &amp; print the first 3 lines
with open('moby_dick.txt') as file:
    print(file.readline())
    print(file.readline())
    print(file.readline())
    print(file.readline(10))
    print(file.readline(50))
    print(file.readline(50))
</code></pre>

<pre><code>CHAPTER 1. Loomings.

Call me Ishmael. Some years ago--never mind how long precisely--having

little or 
no money in my purse, and nothing particular to in
terest me on
</code></pre>
<ul>
<li><code>this</code> is a special package about PEP 20.</li>
</ul>
<pre><code class="python">import this
</code></pre>

<pre><code>The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren't special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
Although that way may not be obvious at first unless you're Dutch.
Now is better than never.
Although never is often better than *right* now.
If the implementation is hard to explain, it's a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea -- let's do more of those!
</code></pre>
<ul>
<li>BDFL: Benevolent Dictator For Life, a.k.a. Guido van Rossum, Python’s creator.</li>
</ul>
<h5 id="numpy">Numpy<a class="headerlink" href="#numpy" title="Permanent link">&para;</a></h5>
<ul>
<li>NumPy arrays are a standard for storing numerical data.</li>
<li>Arrays are essential to other packages such as the <code>scikit-learn</code>, for machine learning.</li>
<li>Import <code>numpy</code> and <code>matplotlib</code> (or invoke them with the <code>%pylab</code> magic command).</li>
</ul>
<pre><code class="python">import numpy as np
import matplotlib.pyplot as plt
</code></pre>

<pre><code class="python"># or...
%pylab inline

# no need for preceeding functions (methods) with np. or plt.
</code></pre>

<pre><code>Populating the interactive namespace from numpy and matplotlib
</code></pre>
<ul>
<li>Import a csv file and assign the content to an array.</li>
</ul>
<pre><code class="python">file = 'digits.csv'

# Load the file as an array called digits
digits = loadtxt(file, delimiter = ',')

# Print the datatype of digits
print(type(digits))

print(digits)

# Select a row
im = digits[2, 2:]
print(im)
</code></pre>

<pre><code>&lt;class 'numpy.ndarray'&gt;
[[ 1.  0.  0.  0.  0.  0.]
 [ 0.  0.  0.  0.  0.  0.]
 [ 1.  0.  0.  0.  0.  0.]
 [ 2.  0.  0.  0.  0.  0.]
 [ 0.  0.  0.  0.  0.  0.]
 [ 5.  0.  0.  0.  0.  0.]]
[ 0.  0.  0.  0.]
</code></pre>
<ul>
<li>Import a txt file. The <code>delimiter</code> can be <code>'\t'</code>, <code>','</code>, <code>';'</code>, etc. </li>
<li>Skip the first 90 rows.</li>
</ul>
<pre><code class="python">file = 'digits_header.txt'

# Load the data into array data
data = loadtxt(file, delimiter='  ', skiprows = 90)

# Print data
print(data)
</code></pre>

<pre><code>[[ 3.  0.]
 [ 6.  0.]
 [ 4.  0.]
 [ 6.  0.]
 [ 2.  0.]
 [ 9.  0.]
 [ 1.  0.]
 [ 2.  0.]
 [ 0.  0.]
 [ 5.  0.]]
</code></pre>
<ul>
<li>Import a txt file, but only the last rows and first column.</li>
</ul>
<pre><code class="python">data2 = loadtxt(file, delimiter='  ', skiprows = 90, usecols = [0])

# Print data
print(data2)
</code></pre>

<pre><code>[ 3.  6.  4.  6.  2.  9.  1.  2.  0.  5.]
</code></pre>
<ul>
<li>Import a txt file as string.</li>
</ul>
<pre><code class="python">file = 'seaslug.txt'

# Import file: data
data = loadtxt(file, delimiter = ' ', dtype = str)

# Print the first element of data
print(data[0])
</code></pre>

<pre><code>['b"b\'Time\'"' 'b"b\'Percent\'"']
</code></pre>
<ul>
<li>Import a txt file as float numbers.</li>
</ul>
<pre><code class="python">file = 'seaslug2.txt'

# Import data as floats and skip the first row: data_float
data_float = loadtxt(file, delimiter='   ', dtype = float, skiprows = 1)

# Print the 10th element of data_float
print(data_float[9])

# Plot a scatterplot of the data
scatter(data_float[:, 0], data_float[:, 1])
xlabel('time (min.)')
ylabel('percentage of larvae')

show()
</code></pre>

<pre><code>[ 0.     0.357]
</code></pre>
<p><img alt="png" src="../img/importing_data_into_python/output_18_1.png" /></p>
<ul>
<li>Import a csv file. Format the data.</li>
</ul>
<pre><code class="python">data = genfromtxt('titanic.csv', delimiter = ',', names = True, dtype = None)
</code></pre>

<pre><code class="python"> # A structred array
shape(data)
</code></pre>

<pre><code>(891,)
</code></pre>
<ul>
<li>Extract a row, a column.</li>
</ul>
<pre><code class="python"># to get the ith row, merely execute data[i]
print(data[0:10])
</code></pre>

<pre><code>[ (1, 0, 3, b" b'male'", 22.0, 1, 0, b" b'A/5 21171'", 7.25, b" b''", b" b'S'")
 (2, 1, 1, b" b'female'", 38.0, 1, 0, b" b'PC 17599'", 71.2833, b" b'C85'", b" b'C'")
 (3, 1, 3, b" b'female'", 26.0, 0, 0, b" b'STON/O2. 3101282'", 7.925, b" b''", b" b'S'")
 (4, 1, 1, b" b'female'", 35.0, 1, 0, b" b'113803'", 53.1, b" b'C123'", b" b'S'")
 (5, 0, 3, b" b'male'", 35.0, 0, 0, b" b'373450'", 8.05, b" b''", b" b'S'")
 (6, 0, 3, b" b'male'", nan, 0, 0, b" b'330877'", 8.4583, b" b''", b" b'Q'")
 (7, 0, 1, b" b'male'", 54.0, 0, 0, b" b'17463'", 51.8625, b" b'E46'", b" b'S'")
 (8, 0, 3, b" b'male'", 2.0, 3, 1, b" b'349909'", 21.075, b" b''", b" b'S'")
 (9, 1, 3, b" b'female'", 27.0, 0, 2, b" b'347742'", 11.1333, b" b''", b" b'S'")
 (10, 1, 2, b" b'female'", 14.0, 1, 0, b" b'237736'", 30.0708, b" b''", b" b'C'")]
</code></pre>
<pre><code class="python"># to get the column with name 'Fare', execute data['Fare']
print(data['Fare'][0:10])
</code></pre>

<pre><code>[  7.25    71.2833   7.925   53.1      8.05     8.4583  51.8625  21.075
  11.1333  30.0708]
</code></pre>
<ul>
<li>Import a csv file. </li>
<li>Format the data.</li>
</ul>
<pre><code class="python"># default dtype is None
data2 = recfromcsv('titanic.csv', delimiter = ',', names = True, dtype = None)
</code></pre>

<pre><code class="python"># Print out first three entries
print(data2[:3])
</code></pre>

<pre><code>[ (1, 0, 3, b" b'male'", 22.0, 1, 0, b" b'A/5 21171'", 7.25, b" b''", b" b'S'")
 (2, 1, 1, b" b'female'", 38.0, 1, 0, b" b'PC 17599'", 71.2833, b" b'C85'", b" b'C'")
 (3, 1, 3, b" b'female'", 26.0, 0, 0, b" b'STON/O2. 3101282'", 7.925, b" b''", b" b'S'")]
</code></pre>
<h5 id="pandas">Pandas<a class="headerlink" href="#pandas" title="Permanent link">&para;</a></h5>
<ul>
<li>Two-dimensional labeled data structure(s) or  data frame (DataFrame).</li>
<li>Pythonic analog of R&rsquo;s dataframes.</li>
<li>Columns can be of potentially different types.</li>
<li>Excellent object for: <ul>
<li>Manipulate, slice, reshape, groupby, join, merge.</li>
<li>Perform statistics.</li>
<li>Work with time series data.</li>
<li>Exploratory data analysis.</li>
<li>Data wrangling.</li>
<li>Data preprocessing.</li>
<li>Building models.</li>
<li>Visualization.</li>
</ul>
</li>
<li>There exists standards and best practices to use pandas.</li>
</ul>
<pre><code class="python"># Import pandas
import pandas as pd
</code></pre>

<ul>
<li>Pandas is not part of <code>%pylab</code>.</li>
<li>Import a file.</li>
</ul>
<pre><code class="python">file = 'titanic.csv'

# Read the file into a DataFrame: df
df = pd.read_csv(file)

# View the head of the DataFrame
print(df.head())
</code></pre>

<pre><code>   Passengerid   Survived   Pclass         Sex    Age   SibSp   Parch  \
0            1          0        3     b'male'   22.0       1       0   
1            2          1        1   b'female'   38.0       1       0   
2            3          1        3   b'female'   26.0       0       0   
3            4          1        1   b'female'   35.0       1       0   
4            5          0        3     b'male'   35.0       0       0

                 Ticket     Fare     Cabin  Embarked  
0          b'A/5 21171'   7.2500       b''      b'S'  
1           b'PC 17599'  71.2833    b'C85'      b'C'  
2   b'STON/O2. 3101282'   7.9250       b''      b'S'  
3             b'113803'  53.1000   b'C123'      b'S'  
4             b'373450'   8.0500       b''      b'S'
</code></pre>
<ul>
<li>Import another file; no header and some rows.</li>
</ul>
<pre><code class="python">file = 'digits2.csv'

# Read the first 5 rows of the file into a DataFrame: data
data = pd.read_csv(file, nrows = 5, header = None)

# Print the datatype of data
print(type(data))

# Build a numpy array from the DataFrame: data_array
data_array = data.values

# Print the datatype of data_array to the shell
print(type(data_array))
</code></pre>

<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
&lt;class 'numpy.ndarray'&gt;
</code></pre>
<ul>
<li>Import another file; replace the missing data (NA).</li>
</ul>
<pre><code class="python">file = 'titanic_corrupt.csv'

# Assign filename: file
file = 'titanic_corrupt.csv'

# Import file: data
data = pd.read_csv(file, sep = ';', comment = '#', na_values = ['Nothing'])

# Print the head of the DataFrame
print(data.head())
</code></pre>

<pre><code>   PassengerId  Survived  Pclass     Sex   Age  SibSp  Parch   \
0            1         0       3    male  22.0      1       0   
1            2         1       1  female  38.0      1       0   
2            3         1       3  female  26.0      0       0   
3            4         1       1  female  35.0      1       0   
4            5         0       3    male  35.0      0       0

             Ticket   Fare Cabin Embarked  
0         A/5 21171   7,25   NaN        S  
1          PC 17599    NaN   NaN      NaN  
2  STON/O2. 3101282  7,925   NaN        S  
3            113803   53,1  C123        S  
4            373450   8,05   NaN        S
</code></pre>
<ul>
<li>Plot the <code>Age</code> variable in a histogram.</li>
</ul>
<pre><code class="python">pd.DataFrame.hist(data[['Age']])
plt.xlabel('Age (years)')
plt.ylabel('count')

plt.show()
</code></pre>

<p><img alt="png" src="../img/importing_data_into_python/output_38_0.png" /></p>
<h4 id="2-importing-from-other-files">2, Importing from Other Files<a class="headerlink" href="#2-importing-from-other-files" title="Permanent link">&para;</a></h4>
<ul>
<li>With Pandas&hellip; and a bit of Numpy.</li>
<li>Excel spreadsheets.</li>
<li>MATLAB files.</li>
<li>SAS files.</li>
<li>Stata files.</li>
<li>HDF5 files (large datasets, scientific, legal, etc.).</li>
<li>Feather.</li>
<li>Julia.</li>
<li>Pickled files (binary).</li>
</ul>
<pre><code class="python">import os

wd = os.getcwd()
os.listdir(wd)
</code></pre>

<pre><code>['.ipynb_checkpoints',
 'a_movie.json',
 'cars.csv',
 'count.svg',
 'CYratioCyt.png',
 'CYratioCyt.svg',
 'digits.csv',
 'digits2.csv',
 'digits_header.txt',
 'disa10.png',
 'disa10.svg',
 'economic.csv',
 'economic2.xls',
 'Importing Data into Python 3.ipynb',
 'importing_python_ch1_pdf_slides.pdf',
 'importing_python_ch2_pdf_slides.pdf',
 'importing_python_ch3_pdf_slides.pdf',
 'importing_python_ch4_pdf_slides.pdf',
 'importing_python_ch5_pdf_slides.pdf',
 'intermediate_python_ch1_slides.pdf',
 'intermediate_python_ch2_slides.pdf',
 'intermediate_python_ch3_slides.pdf',
 'intermediate_python_ch4_slides.pdf',
 'intermediate_python_ch5_slides.pdf',
 'intro_python_ch1_slides.pdf',
 'intro_python_ch2_slides.pdf',
 'intro_python_ch3_slides.pdf',
 'intro_python_ch4_slides.pdf',
 'moby_dick.txt',
 'new1.py',
 'p.png',
 'PRIO_bd3.0.xls',
 'Python 3.ipynb',
 'Python3.py',
 'sales.sas7bdat',
 'save.p',
 'seaslug.txt',
 'seaslug2.txt',
 'strain.png',
 'strain.svg',
 'Thumbs.db',
 'titanic.csv',
 'titanic_corrupt.csv',
 'tweets_figure.png',
 'tweets_figure.svg',
 'winequality-red.csv']
</code></pre>
<p><strong>Pickled files</strong></p>
<ul>
<li>There are a number of datatypes that cannot be saved easily to flat files, such as lists and dictionaries. </li>
<li>If you want your files to be human readable, you may want to save them as text files in a clever manner (JSONs, which you will see in a later chapter, are appropriate for Python dictionaries).</li>
<li>If, however, you merely want to be able to import them into Python, you can serialize them. </li>
<li>All this means is converting the object into a sequence of bytes, or bytestream.</li>
<li>Import it.</li>
</ul>
<pre><code class="python">import pickle

# Save a dictionary into a pickle file.
fav = {'Airline' : '8', 'Aug' : '85', 'June' : '69.4', 'Mar' : '84.4'}
pickle.dump(fav, open(&quot;save.p&quot;, &quot;wb&quot;))

# save.p

# Open pickle file and load data: d

with open('save.p', 'rb') as file:
    d = pickle.load(file)

# Print d
print(d)

# Print datatype of d
print(type(d))
</code></pre>

<pre><code>{'Aug': '85', 'Airline': '8', 'Mar': '84.4', 'June': '69.4'}
&lt;class 'dict'&gt;
</code></pre>
<p><strong>Excel files</strong></p>
<pre><code class="python">file = 'PRIO_bd3.0.xls'

# Load spreadsheet: xl
xl = pd.ExcelFile(file)

# Print sheet names
print(xl.sheet_names)
</code></pre>

<pre><code>['bdonly']
</code></pre>
<ul>
<li>Parse the sheets. </li>
<li>By name or by number (first, second, &hellip;).</li>
</ul>
<pre><code class="python">df1 = xl.parse('bdonly')
</code></pre>

<pre><code class="python">df2 = xl.parse(0)
</code></pre>

<ul>
<li>Options: parse the first sheet by index, skip the first row of data, then name the columns &lsquo;Country&rsquo; and &lsquo;AAM due to War (2002)&rsquo;</li>
</ul>
<pre><code class="python">df2 = xl.parse(0, parse_cols = [0], skiprows = [0], names = ['Country', 'AAM due to War (2002)'])
</code></pre>

<ul>
<li>Options: parse the second sheet, parse only the first column, skip the first row and rename the column &lsquo;Country&rsquo;.</li>
</ul>
<pre><code class="python">df2 = xl.parse(1, parse_cols = [0], skiprows = [0], names = ['Country'])
</code></pre>

<ul>
<li>Print the head of the DataFrame.</li>
</ul>
<pre><code class="python">print(df1.head())
</code></pre>

<pre><code>   id  year  bdeadlow  bdeadhig  bdeadbes  annualdata  source  bdversion  \
0   1  1946      1000      9999      1000           2       1          3   
1   1  1952       450      3000      -999           2       1          3   
2   1  1967        25       999        82           2       1          3   
3   2  1946        25       999      -999           0       0          3   
4   2  1947        25       999      -999           0       0          3

   location    sidea   ...    epend  ependdate ependprec  gwnoa gwnoa2nd  \
0   Bolivia  Bolivia   ...        1 1946-07-21     -99.0    145      NaN   
1   Bolivia  Bolivia   ...        1 1952-04-12     -99.0    145      NaN   
2   Bolivia  Bolivia   ...        1 1967-10-16     -99.0    145      NaN   
3  Cambodia   France   ...        0        NaT       NaN    220      NaN   
4  Cambodia   France   ...        0        NaT       NaN    220      NaN

   gwnob  gwnob2nd  gwnoloc region  version  
0    NaN       NaN      145      5   2009-4  
1    NaN       NaN      145      5   2009-4  
2    NaN       NaN      145      5   2009-4  
3    NaN       NaN      811      3   2009-4  
4    NaN       NaN      811      3   2009-4

[5 rows x 32 columns]
</code></pre>
<ul>
<li>We process images since we cheat a little. </li>
<li>Many packages are not installed. </li>
<li>We are not be able to import some data. </li>
<li>Images will then present the final results.</li>
</ul>
<pre><code class="python">from IPython.display import Image
# for the following pictures...
</code></pre>

<p><strong>SAS files</strong></p>
<ul>
<li>Advanced analytics</li>
<li>Multivariate analysis</li>
<li>Business intelligence</li>
<li>Data management</li>
<li>Predictive analytics</li>
<li>Standard for computational analysis</li>
<li>Code (instead of importing the package):</li>
</ul>
<pre><code class="python"># Import sas7bdat package
from sas7bdat import SAS7BDAT

# Save file to a DataFrame: df_sas
with SAS7BDAT('sales.sas7bdat') as file:
    df_sas = file.to_data_frame()

# Print head of DataFrame
print(df_sas.head())

# Plot histogram of DataFrame features
pd.DataFrame.hist(df_sas[['P']])
plt.ylabel('count')

plt.show()
</code></pre>

<ul>
<li>The data are adapted from the website of the undergraduate text book Principles of Economics by Hill, Griffiths and Lim (http://www.principlesofeconometrics.com/sas/).</li>
<li>The chart would be:</li>
</ul>
<pre><code class="python">Image('p.png')
</code></pre>

<p><img alt="png" src="../img/importing_data_into_python/output_57_0.png" /></p>
<p><strong>Stata files</strong></p>
<ul>
<li>The data consist of disease extent for several diseases in various countries (more information can be found at http://www.cid.harvard.edu/ciddata/geog/readme_disarea.html).</li>
</ul>
<pre><code class="python"># Import pandas
import pandas as pd

# Load Stata file into a pandas DataFrame: df
df = pd.read_stata('disarea.dta')

# Print the head of the DataFrame df
print(df.head())
</code></pre>

<pre><code>  wbcode               country  disa1  disa2  disa3  disa4  disa5  disa6  \
0    AFG           Afghanistan   0.00   0.00   0.76   0.73    0.0   0.00   
1    AGO                Angola   0.32   0.02   0.56   0.00    0.0   0.00   
2    ALB               Albania   0.00   0.00   0.02   0.00    0.0   0.00   
3    ARE  United Arab Emirates   0.00   0.00   0.00   0.00    0.0   0.00   
4    ARG             Argentina   0.00   0.24   0.24   0.00    0.0   0.23

   disa7  disa8   ...    disa16  disa17  disa18  disa19  disa20  disa21  \
0   0.00    0.0   ...       0.0     0.0     0.0    0.00    0.00     0.0   
1   0.56    0.0   ...       0.0     0.4     0.0    0.61    0.00     0.0   
2   0.00    0.0   ...       0.0     0.0     0.0    0.00    0.00     0.0   
3   0.00    0.0   ...       0.0     0.0     0.0    0.00    0.00     0.0   
4   0.00    0.0   ...       0.0     0.0     0.0    0.00    0.05     0.0

   disa22  disa23  disa24  disa25  
0    0.00    0.02    0.00    0.00  
1    0.99    0.98    0.61    0.00  
2    0.00    0.00    0.00    0.16  
3    0.00    0.00    0.00    0.00  
4    0.00    0.01    0.00    0.11

[5 rows x 27 columns]
</code></pre>
<ul>
<li>Plot histogram of one column of the DataFrame.</li>
</ul>
<pre><code class="python">pd.DataFrame.hist(df[['disa10']])
plt.xlabel('Extent of disease')
plt.ylabel('Number of coutries')

plt.show()
</code></pre>

<p><img alt="png" src="../img/importing_data_into_python/output_61_0.png" /></p>
<p><strong>HDF5 files</strong></p>
<ul>
<li>Standard for storing large quantities of numerical data.</li>
<li>Datasets can be hundreds of gigabytes or terabytes.</li>
<li>HDF5 can scale to exabytes.</li>
<li>Code (instead of importing the package):</li>
</ul>
<pre><code class="python"># Import packages
import numpy as np
import h5py

# Assign filename: file
file = 'LIGO_data.hdf5' 

# Load file: data
data = h5py.File(file, 'r')

# Print the datatype of the loaded file
print(type(data))

# Print the keys of the file
for key in data.keys():
    print(key)

# Get the HDF5 group: group
group = data['strain']

# Check out keys of group
for key in group.keys():
    print(key)

# Set variable equal to time series data: strain
strain = data['strain']['Strain'].value

# Set number of time points to sample: num_samples
num_samples = 10000

# Set time vector
time = np.arange(0, 1, 1/num_samples)

# Plot data
plt.plot(time, strain[:num_samples])
plt.xlabel('GPS Time (s)')
plt.ylabel('strain')
plt.show()
</code></pre>

<ul>
<li>You can find the LIGO data plus loads of documentation and tutorials (https://losc.ligo.org/events/GW150914/) and (https://losc.ligo.org/s/events/GW150914/GW150914_tutorial.html) is a great tutorial on Signal Processing with the data.</li>
</ul>
<pre><code class="python">Image('strain.png')
</code></pre>

<p><img alt="png" src="../img/importing_data_into_python/output_63_0.png" /></p>
<p><strong>MATLAB</strong></p>
<ul>
<li>“Matrix Laboratory”.</li>
<li>Industry standard in engineering and science.</li>
<li>Code (instead of importing the package):</li>
</ul>
<pre><code class="python"># Import package
import scipy.io

# Load MATLAB file: mat
mat = scipy.io.loadmat('albeck_gene_expression.mat')

# Print the datatype type of mat
print(type(mat))

# Print the keys of the MATLAB dictionary
print(mat.keys())

# Print the type of the value corresponding to the key 'CYratioCyt'
print(type(mat['CYratioCyt']))

# Print the shape of the value corresponding to the key 'CYratioCyt'
print(np.shape(mat['CYratioCyt']))

# Subset the array and plot it
data = mat['CYratioCyt'][25, 5:]
fig = plt.figure()
plt.plot(data)
plt.xlabel('time (min.)')
plt.ylabel('normalized fluorescence (measure of expression)')
plt.show()
</code></pre>

<ul>
<li>This file contains gene expression data from the Albeck Lab at UC Davis (https://www.mcb.ucdavis.edu/faculty-labs/albeck/workshop.htm). You can find the data and some great documentation.</li>
</ul>
<pre><code class="python">Image('CYratioCyt.png')
</code></pre>

<p><img alt="png" src="../img/importing_data_into_python/output_65_0.png" /></p>
<h4 id="3-working-with-relational-databases">3, Working with Relational Databases<a class="headerlink" href="#3-working-with-relational-databases" title="Permanent link">&para;</a></h4>
<p><strong>Relational Database Management System</strong></p>
<ul>
<li>PostgreSQL.</li>
<li>MySQL.</li>
<li>SQLite.</li>
<li>Code (instead of importing the package):</li>
</ul>
<pre><code class="python"># Import necessary module
from sqlalchemy import create_engine

# Create engine: engine
engine = create_engine('sqlite:///Chinook.sqlite')
</code></pre>

<p><code>'sqlite:///Northwind.sqlite'</code> is called the connection string to the SQLite database.</p>
<ul>
<li>The Chinook database (http://chinookdatabase.codeplex.com/) contains information about a semi-fictional digital media store in which media data is real and customer, employee and sales data has been manually created.</li>
<li>Code (instead of importing the package):</li>
</ul>
<pre><code class="python"># Save the table names to a list: table_names
table_names = engine.table_names()

# Print the table names to the shell
print(table_names)
</code></pre>

<p><strong>Query the DB</strong></p>
<ul>
<li>The final <code>;</code> is facultative.</li>
<li>Code (instead of importing the package):</li>
</ul>
<pre><code class="python"># Create engine: engine
engine = create_engine('sqlite:///Chinook.sqlite')

# Open engine connection: con
con = engine.connect()

# Perform query: rs
rs = con.execute('SELECT * FROM Album')

# Save results of the query to DataFrame: df
df = pd.DataFrame(rs.fetchall())

# Close connection
con.close()

# Print head of DataFrame df
print(df.head())
</code></pre>

<p><strong>Customize queries</strong></p>
<ul>
<li>Code (instead of importing the package):</li>
</ul>
<pre><code class="python"># Create engine: engine
engine = create_engine('sqlite:///Chinook.sqlite') # becomes facultative with many queries

# Open engine in context manager
# Perform query and save results to DataFrame: df
with engine.connect() as con:
    rs = con.execute('SELECT LastName, Title FROM Employee')
    df = pd.DataFrame(rs.fetchmany(size = 3))
    df.columns = rs.keys() # set the DataFrame's column names to the corresponding names of the table columns

# Print the length of the DataFrame df
print(len(df))

# Print the head of the DataFrame df
print(df.head())
</code></pre>

<ul>
<li>Code (instead of importing the package):</li>
</ul>
<pre><code class="python"># Create engine: engine
engine = create_engine('sqlite:///Chinook.sqlite') # becomes facultative with many queries

# Open engine in context manager
# Perform query and save results to DataFrame: df
with engine.connect() as con:
    rs = con.execute(&quot;SELECT * FROM Employee WHERE EmployeeId &gt;= 6&quot;)
    df = pd.DataFrame(rs.fetchall())
    df.columns = rs.keys()

# Print the head of the DataFrame df
print(df.head())
</code></pre>

<ul>
<li>Code (instead of importing the package):</li>
</ul>
<pre><code class="python"># Create engine: engine
engine = create_engine('sqlite:///Chinook.sqlite')

# Open engine in context manager
with engine.connect() as con:
    rs = con.execute('SELECT * FROM Employee ORDER BY BirthDate')
    df = pd.DataFrame(rs.fetchall())

    # Set the DataFrame's column names
    df.columns = rs.keys()

# Print head of DataFrame
print(df.head())
</code></pre>

<p><strong>Query the DB the Pandas way</strong></p>
<ul>
<li>Simpler code (instead of importing the package)!!!</li>
</ul>
<pre><code class="python"># Import packages
from sqlalchemy import create_engine
import pandas as pd

# Create engine: engine
engine = create_engine('sqlite:///Chinook.sqlite')

# Execute query and store records in DataFrame: df
df = pd.read_sql_query(&quot;SELECT * FROM Album&quot;, engine)

# Print head of DataFrame
print(df.head())

# Open engine in context manager
# Perform query and save results to DataFrame: df1
with engine.connect() as con:
    rs = con.execute(&quot;SELECT * FROM Album&quot;)
    df1 = pd.DataFrame(rs.fetchall())
    df1.columns = rs.keys()

# Confirm that both methods yield the same result: does df = df1 ?   
print(df.equals(df1))
</code></pre>

<ul>
<li>Code (instead of importing the package):</li>
</ul>
<pre><code class="python"># Import packages
from sqlalchemy import create_engine
import pandas as pd

# Create engine: engine
engine = create_engine('sqlite:///Chinook.sqlite')

# Execute query and store records in DataFrame: df
df = pd.read_sql_query(&quot;SELECT * FROM Employee WHERE EmployeeId &gt;= 6 ORDER BY BirthDate&quot;, engine)

# Print head of DataFrame
print(df.head())
</code></pre>

<p><strong>INNER JOIN</strong></p>
<ul>
<li>Code (instead of importing the package):</li>
</ul>
<pre><code class="python">import pandas as pd
from sqlalchemy import create_engine

engine = create_engine('sqlite:///Chinook.sqlite')

# Open engine in context manager
# Perform query and save results to DataFrame: df
with engine.connect() as con:
    rs = con.execute(&quot;SELECT Title, Name FROM Album INNER JOIN Artist on Album.ArtistID = Artist.ArtistID&quot;)
    df = pd.DataFrame(rs.fetchall())
    df.columns = rs.keys()

# Print head of DataFrame df
print(df.head())
</code></pre>

<ul>
<li>Alternative code:</li>
</ul>
<pre><code class="python">df = pd.read_sql_query(&quot;SELECT Title, Name FROM Album INNER JOIN Artist on Album.ArtistID = Artist.ArtistID&quot;, engine)

# Print head of DataFrame df
print(df.head())
</code></pre>

<ul>
<li>Code (instead of importing the package):</li>
</ul>
<pre><code class="python"># Execute query and store records in DataFrame: df
df = pd.read_sql_query(&quot;SELECT * FROM PlaylistTrack INNER JOIN Track on PlaylistTrack.TrackId = Track.TrackId WHERE Milliseconds &lt; 250000&quot;, engine)

# Print head of DataFrame
print(df.head())
</code></pre>

<h4 id="4-importing-flat-files-from-the-web-web-scraping">4, Importing Flat Files from the Web (Web Scraping)<a class="headerlink" href="#4-importing-flat-files-from-the-web-web-scraping" title="Permanent link">&para;</a></h4>
<p><sub> scrape, wrangle, munge, wrangling, munging</sub> </p>
<ul>
<li>Import and locally save datasets from the web.</li>
<li>Load datasets into pandas DataFrames.</li>
<li>Make HTTP requests (GET requests).</li>
<li>Scrape web data such as HTML.</li>
<li>Parse HTML into useful data (BeautifulSoup).</li>
<li>Use the urllib and requests packages.</li>
</ul>
<p><strong>Using the <code>urllib</code> package on csv files</strong></p>
<ul>
<li>Import the package.</li>
</ul>
<pre><code class="python">from urllib.request import urlretrieve

# import pandas as pd

# Assign url of file: url
url = 'http://archive.ics.uci.edu/ml/machine-learning-databases/wine-quality/winequality-red.csv'

# Save file locally
urlretrieve(url, 'winequality-red.csv')

# Read file into a DataFrame and print its head
df = pd.read_csv('winequality-red.csv', sep=';')
print(df.head())
</code></pre>

<pre><code>   fixed acidity  volatile acidity  citric acid  residual sugar  chlorides  \
0            7.4              0.70         0.00             1.9      0.076   
1            7.8              0.88         0.00             2.6      0.098   
2            7.8              0.76         0.04             2.3      0.092   
3           11.2              0.28         0.56             1.9      0.075   
4            7.4              0.70         0.00             1.9      0.076

   free sulfur dioxide  total sulfur dioxide  density    pH  sulphates  \
0                 11.0                  34.0   0.9978  3.51       0.56   
1                 25.0                  67.0   0.9968  3.20       0.68   
2                 15.0                  54.0   0.9970  3.26       0.65   
3                 17.0                  60.0   0.9980  3.16       0.58   
4                 11.0                  34.0   0.9978  3.51       0.56

   alcohol  quality  
0      9.4        5  
1      9.8        5  
2      9.8        5  
3      9.8        6  
4      9.4        5
</code></pre>
<pre><code class="python"># import matplotlib.pyplot as plt
# import pandas as pd

# Assign url of file: url
url = 'http://archive.ics.uci.edu/ml/machine-learning-databases/wine-quality/winequality-red.csv'

# Read file into a DataFrame: df
df = pd.read_csv(url, sep = ';')

# Print the head of the DataFrame
print(df.head())

# Plot first column of df
pd.DataFrame.hist(df.ix[:, 0:1])
plt.xlabel('fixed acidity (g(tartaric acid)/dm$^3$)')
plt.ylabel('count')
plt.show()
</code></pre>

<pre><code>   fixed acidity  volatile acidity  citric acid  residual sugar  chlorides  \
0            7.4              0.70         0.00             1.9      0.076   
1            7.8              0.88         0.00             2.6      0.098   
2            7.8              0.76         0.04             2.3      0.092   
3           11.2              0.28         0.56             1.9      0.075   
4            7.4              0.70         0.00             1.9      0.076

   free sulfur dioxide  total sulfur dioxide  density    pH  sulphates  \
0                 11.0                  34.0   0.9978  3.51       0.56   
1                 25.0                  67.0   0.9968  3.20       0.68   
2                 15.0                  54.0   0.9970  3.26       0.65   
3                 17.0                  60.0   0.9980  3.16       0.58   
4                 11.0                  34.0   0.9978  3.51       0.56

   alcohol  quality  
0      9.4        5  
1      9.8        5  
2      9.8        5  
3      9.8        6  
4      9.4        5
</code></pre>
<p><img alt="png" src="../img/importing_data_into_python/output_73_1.png" /></p>
<p><strong>Using the <code>urllib</code> package on Excel files</strong></p>
<pre><code class="python"># import pandas as pd

# Assign url of file: url
url = 'http://s3.amazonaws.com/assets.datacamp.com/course/importing_data_into_r/latitude.xls'

# Read in all sheets of Excel file: xl
xl = pd.read_excel(url, sheetname = None)

# Print the sheetnames (keys) to the shell !!!
print(xl.keys())

# Print the head of the first sheet (using its name, NOT its index)
print(xl['1700'].head())
</code></pre>

<pre><code>dict_keys(['1700', '1900'])
                 country       1700
0            Afghanistan  34.565000
1  Akrotiri and Dhekelia  34.616667
2                Albania  41.312000
3                Algeria  36.720000
4         American Samoa -14.307000
</code></pre>
<p><strong>HTTP requests to import files from the web</strong></p>
<ul>
<li><code>requests</code> is one of the most downloaded Python packages.</li>
<li><code>requests</code> works with <code>urllib</code>.</li>
<li>Import the package.</li>
</ul>
<pre><code class="python">from urllib.request import urlopen, Request

# Specify the url
url = &quot;http://www.datacamp.com/teach/documentation&quot;

# This packages the request: request
request = Request(url)

# Send the request and catches the response: response
response = urlopen(request)

# Print the datatype of response
print(type(response))

# Be polite and close the response!
response.close()
</code></pre>

<pre><code>&lt;class 'http.client.HTTPResponse'&gt;
</code></pre>
<pre><code class="python">from urllib.request import urlopen, Request

url = &quot;http://docs.datacamp.com/teach/&quot;

request = Request(url)

response = urlopen(request)


# Extract the response: html
html = response.read()

# Print the html
print(html)

# Be polite and close the response!
response.close()
</code></pre>

<pre><code>b'&lt;!DOCTYPE html&gt;\n&lt;link rel="shortcut icon" href="images/favicon.ico" /&gt;\n&lt;html&gt;\n\n  &lt;head&gt;\n  &lt;meta charset="utf-8"&gt;\n  &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;\n  &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;\n\n  &lt;title&gt;Home&lt;/title&gt;\n  &lt;meta name="description" content="All Documentation on Course Creation"&gt;\n\n  &lt;link rel="stylesheet" href="/teach/css/main.css"&gt;\n  &lt;link rel="canonical" href="/teach/"&gt;\n  &lt;link rel="alternate" type="application/rss+xml" title="DataCamp Teach Documentation" href="/teach/feed.xml" /&gt;\n&lt;/head&gt;\n\n\n  &lt;body&gt;\n\n    &lt;header class="site-header"&gt;\n\n  &lt;div class="wrapper"&gt;\n\n    &lt;a class="site-title" href="/teach/"&gt;DataCamp Teach Documentation&lt;/a&gt;\n\n  &lt;/div&gt;\n\n&lt;/header&gt;\n\n\n    &lt;div class="page-content"&gt;\n      &lt;div class="wrapper"&gt;\n        &lt;p&gt;The Teach Documentation has been moved to &lt;a href="https://www.datacamp.com/teach/documentation"&gt;https://www.datacamp.com/teach/documentation&lt;/a&gt;!&lt;/p&gt;\n\n&lt;!-- Everybody can teach on DataCamp. The resources on this website explain all the steps to build your own course on DataCamp\'s interactive data science platform.\n\nInterested in partnering with DataCamp? Head over to the [Course Material](/teach/course-material.html) page to get an idea of the requirements to build your own interactive course together with DataCamp!\n\n## Table of Contents\n\n- [Course Material](/teach/course-material.html) - Content required to build a DataCamp course.\n- [Video Lectures](/teach/video-lectures.html) - Details on video recording and editing.\n- [DataCamp Teach](https://www.datacamp.com/teach) - Use the DataCamp Teach website to create DataCamp courses (preferred).\n- [datacamp R Package](https://github.com/datacamp/datacamp/wiki) - Use R Package to create DataCamp courses (legacy).\n- [Code DataCamp Exercises](/teach/code-datacamp-exercises.html)\n- [SCT Design (R)](https://github.com/datacamp/testwhat/wiki)\n- [SCT Design (Python)](https://github.com/datacamp/pythonwhat/wiki)\n- [Style Guide](/teach/style-guide.html) --&gt;\n\n\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n    \n\n  &lt;/body&gt;\n\n&lt;/html&gt;\n'
</code></pre>
<p><strong>Using <code>requests</code></strong></p>
<pre><code class="python">import requests

url = &quot;http://docs.datacamp.com/teach/&quot;

r = requests.get(url)

text = r.text

# Print part of the html (split the paragraphs) instead of all with  print(text)
head = text.split('\n\n')

print(head[0])
print('')
print(head[1])
print('')
print(head[2])
print('')
print(head[3])
</code></pre>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;link rel="shortcut icon" href="images/favicon.ico" /&gt;
&lt;html&gt;

  &lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;

  &lt;title&gt;Home&lt;/title&gt;
  &lt;meta name="description" content="All Documentation on Course Creation"&gt;

  &lt;link rel="stylesheet" href="/teach/css/main.css"&gt;
  &lt;link rel="canonical" href="/teach/"&gt;
  &lt;link rel="alternate" type="application/rss+xml" title="DataCamp Teach Documentation" href="/teach/feed.xml" /&gt;
&lt;/head&gt;
</code></pre>
<p><strong>Scraping the web</strong></p>
<p><sub> scrape, wrangle, munge</sub></p>
<ul>
<li>Scrape unstructured data.</li>
<li>Scrape structured data, parse it and extract the data from HTML using the <code>BeautifulSoup</code> package.</li>
<li>Import the packages.</li>
</ul>
<pre><code class="python">import requests
from bs4 import BeautifulSoup

url = 'https://www.python.org/~guido/'

r = requests.get(url)

html_doc = r.text

# Create a BeautifulSoup object from the HTML: soup
soup = BeautifulSoup(html_doc, 'lxml')

# Prettify the BeautifulSoup object: pretty_soup
pretty_soup = soup.prettify()

# Print the response
print(type(pretty_soup))

# Print part of the html (split the text), not all with  print(pretty_soup)
head = pretty_soup.split('&lt;/h3&gt;')

print(head[0])
</code></pre>

<pre><code>&lt;class 'str'&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;
   Guido's Personal Home Page
  &lt;/title&gt;
 &lt;/head&gt;
 &lt;body bgcolor="#FFFFFF" text="#000000"&gt;
  &lt;h1&gt;
   &lt;a href="pics.html"&gt;
    &lt;img border="0" src="images/IMG_2192.jpg"/&gt;
   &lt;/a&gt;
   Guido van Rossum - Personal Home Page
  &lt;/h1&gt;
  &lt;p&gt;
   &lt;a href="http://www.washingtonpost.com/wp-srv/business/longterm/microsoft/stories/1998/raymond120398.htm"&gt;
    &lt;i&gt;
     "Gawky and proud of it."
    &lt;/i&gt;
   &lt;/a&gt;
  &lt;/p&gt;
  &lt;h3&gt;
   &lt;a href="http://metalab.unc.edu/Dave/Dr-Fun/df200004/df20000406.jpg"&gt;
    Who
I Am
   &lt;/a&gt;
</code></pre>
<ul>
<li>Other operations with <code>BeautifulSoup</code>.</li>
</ul>
<pre><code class="python">import requests
from bs4 import BeautifulSoup

url = 'https://www.python.org/~guido/'

r = requests.get(url)

html_doc = r.text


# Create a BeautifulSoup object from the HTML: soup
soup = BeautifulSoup(html_doc, 'lxml')

# Get the title of Guido's webpage: guido_title
guido_title = soup.title # attribute

# Print the title of Guido's webpage to the shell
print(guido_title)

# Get Guido's text: guido_text
guido_text = soup.get_text() # method

# Print Guido's text to the shell
print(guido_text)
</code></pre>

<pre><code>&lt;title&gt;Guido's Personal Home Page&lt;/title&gt;

Guido's Personal Home Page

Guido van Rossum - Personal Home Page
"Gawky and proud of it."
Who
I Am
I am the author of the Python
programming language.  See also my resume
and my publications list, a brief bio, assorted writings, presentations and interviews (all about Python), some
pictures of me,
my new blog, and
my old
blog on Artima.com.  I am
@gvanrossum on Twitter.  I
also have
a G+
profile.

In January 2013 I joined
Dropbox.  I work on various Dropbox
products and have 50% for my Python work, no strings attached.
Previously, I have worked for Google, Elemental Security, Zope
Corporation, BeOpen.com, CNRI, CWI, and SARA.  (See
my resume.)  I created Python while at CWI.

How to Reach Me
You can send email for me to guido (at) python.org.
I read everything sent there, but if you ask
me a question about using Python, it's likely that I won't have time
to answer it, and will instead refer you to
help (at) python.org,
comp.lang.python or
StackOverflow.  If you need to
talk to me on the phone or send me something by snail mail, send me an
email and I'll gladly email you instructions on how to reach me.

My Name
My name often poses difficulties for Americans.

Pronunciation: in Dutch, the "G" in Guido is a hard G,
pronounced roughly like the "ch" in Scottish "loch".  (Listen to the
sound clip.)  However, if you're
American, you may also pronounce it as the Italian "Guido".  I'm not
too worried about the associations with mob assassins that some people
have. :-)

Spelling: my last name is two words, and I'd like keep it
that way, the spelling on some of my credit cards notwithstanding.
Dutch spelling rules dictate that when used in combination with my
first name, "van" is not capitalized: "Guido van Rossum".  But when my
last name is used alone to refer to me, it is capitalized, for
example: "As usual, Van Rossum was right."

Alphabetization: in America, I show up in the alphabet under
"V".  But in Europe, I show up under "R".  And some of my friends put
me under "G" in their address book...

More Hyperlinks

Here's a collection of essays relating to Python
that I've written, including the foreword I wrote for Mark Lutz' book
"Programming Python".
I own the official 
Python license.

The Audio File Formats FAQ
I was the original creator and maintainer of the Audio File Formats
FAQ.  It is now maintained by Chris Bagwell
at http://www.cnpbagwell.com/audio-faq.  And here is a link to
SOX, to which I contributed
some early code.

"On the Internet, nobody knows you're
a dog."
</code></pre>
<ul>
<li>More.</li>
</ul>
<pre><code class="python">import requests
from bs4 import BeautifulSoup

url = 'https://www.python.org/~guido/'

r = requests.get(url)

html_doc = r.text

# create a BeautifulSoup object from the HTML: soup
soup = BeautifulSoup(html_doc, 'lxml')

# Print the title of Guido's webpage
print(soup.title)

# Find all 'a' tags (which define hyperlinks): a_tags
a_tags = soup.find_all('a') # for &lt;a&gt;, hyperlinks

# Print the URLs to the shell
for link in a_tags:
    print( link.get('href'))
</code></pre>

<pre><code>&lt;title&gt;Guido's Personal Home Page&lt;/title&gt;
pics.html
http://www.washingtonpost.com/wp-srv/business/longterm/microsoft/stories/1998/raymond120398.htm
http://metalab.unc.edu/Dave/Dr-Fun/df200004/df20000406.jpg
http://www.python.org
Resume.html
Publications.html
bio.html
http://legacy.python.org/doc/essays/
http://legacy.python.org/doc/essays/ppt/
interviews.html
pics.html
http://neopythonic.blogspot.com
http://www.artima.com/weblogs/index.jsp?blogger=12088
https://twitter.com/gvanrossum
https://plus.google.com/u/0/115212051037621986145/posts
http://www.dropbox.com
Resume.html
http://groups.google.com/groups?q=comp.lang.python
http://stackoverflow.com
guido.au
http://legacy.python.org/doc/essays/
images/license.jpg
http://www.cnpbagwell.com/audio-faq
http://sox.sourceforge.net/
images/internetdog.gif
</code></pre>
<h4 id="5-introduction-to-apis-and-jsons">5, Introduction to APIs and JSONs<a class="headerlink" href="#5-introduction-to-apis-and-jsons" title="Permanent link">&para;</a></h4>
<ul>
<li>API or Application Programming Interface are protocols and routines providing access to websites and web apps like OMDb, Wikipedia, Uber, Uber Developers, BGG, ImDB, Facebook, Instagram, and Twitter.</li>
<li>Most of data coming from APIS are JSON files.</li>
</ul>
<p><strong>Import the <code>json</code> package</strong></p>
<pre><code class="python">import json

# Load JSON: json_data
with open('a_movie.json', 'r') as json_file:
    json_data = json.load(json_file)

print(type(json_data))
print(json_data['Title'])
print(json_data['Year'])
print('')

# Print each key-value pair in json_data
for k in json_data.keys():
    print(k + ': ', json_data[k])
</code></pre>

<pre><code>&lt;class 'dict'&gt;
The Social Network
2010

Response:  True
Rated:  PG-13
Poster:  http://ia.media-imdb.com/images/M/MV5BMTM2ODk0NDAwMF5BMl5BanBnXkFtZTcwNTM1MDc2Mw@@._V1_SX300.jpg
imdbID:  tt1285016
Year:  2010
Awards:  Won 3 Oscars. Another 161 wins &amp; 162 nominations.
Metascore:  95
Language:  English, French
Country:  USA
Plot:  Harvard student Mark Zuckerberg creates the social networking site that would become known as Facebook, but is later sued by two brothers who claimed he stole their idea, and the co-founder who was later squeezed out of the business.
imdbRating:  7.7
Actors:  Jesse Eisenberg, Rooney Mara, Bryan Barter, Dustin Fitzsimons
Title:  The Social Network
imdbVotes:  478,258
Released:  01 Oct 2010
Runtime:  120 min
Genre:  Biography, Drama
Type:  movie
Director:  David Fincher
Writer:  Aaron Sorkin (screenplay), Ben Mezrich (book)
</code></pre>
<p><strong>The <code>requests</code> package again</strong></p>
<ul>
<li>Pull some movie data down from the Open Movie Database (OMDB) using their API.</li>
<li>Pull it as text.</li>
</ul>
<pre><code class="python">import requests

url = 'http://www.omdbapi.com/?t=social+network'

r = requests.get(url)

print(type(r))
print('')

# Print the text of the response
print(r.text)
</code></pre>

<pre><code>&lt;class 'requests.models.Response'&gt;

{"Title":"The Social Network","Year":"2010","Rated":"PG-13","Released":"01 Oct 2010","Runtime":"120 min","Genre":"Biography, Drama","Director":"David Fincher","Writer":"Aaron Sorkin (screenplay), Ben Mezrich (book)","Actors":"Jesse Eisenberg, Rooney Mara, Bryan Barter, Dustin Fitzsimons","Plot":"Harvard student Mark Zuckerberg creates the social networking site that would become known as Facebook, but is later sued by two brothers who claimed he stole their idea, and the co-founder who was later squeezed out of the business.","Language":"English, French","Country":"USA","Awards":"Won 3 Oscars. Another 161 wins &amp; 162 nominations.","Poster":"http://ia.media-imdb.com/images/M/MV5BMTM2ODk0NDAwMF5BMl5BanBnXkFtZTcwNTM1MDc2Mw@@._V1_SX300.jpg","Metascore":"95","imdbRating":"7.7","imdbVotes":"478,258","imdbID":"tt1285016","Type":"movie","Response":"True"}
</code></pre>
<ul>
<li>Pull it as JSON or a dictionary.</li>
</ul>
<pre><code class="python">import requests

url = 'http://www.omdbapi.com/?t=social+network'

r = requests.get(url)

# Decode the JSON data into a dictionary: json_data
json_data = r.json()

print(type(json_data))
print('')

# Print each key-value pair in json_data
for k in json_data.keys():
    print(k + ': ', json_data[k])
</code></pre>

<pre><code>&lt;class 'dict'&gt;

Response:  True
Rated:  PG-13
Poster:  http://ia.media-imdb.com/images/M/MV5BMTM2ODk0NDAwMF5BMl5BanBnXkFtZTcwNTM1MDc2Mw@@._V1_SX300.jpg
imdbID:  tt1285016
Year:  2010
Metascore:  95
Language:  English, French
Country:  USA
Awards:  Won 3 Oscars. Another 161 wins &amp; 162 nominations.
Plot:  Harvard student Mark Zuckerberg creates the social networking site that would become known as Facebook, but is later sued by two brothers who claimed he stole their idea, and the co-founder who was later squeezed out of the business.
Director:  David Fincher
imdbRating:  7.7
Actors:  Jesse Eisenberg, Rooney Mara, Bryan Barter, Dustin Fitzsimons
imdbVotes:  478,258
Released:  01 Oct 2010
Runtime:  120 min
Genre:  Biography, Drama
Type:  movie
Title:  The Social Network
Writer:  Aaron Sorkin (screenplay), Ben Mezrich (book)
</code></pre>
<ul>
<li>Search the Library of Congress.</li>
<li>Pull a dictionary of dictionaries.</li>
</ul>
<pre><code class="python">import requests

url = 'http://chroniclingamerica.loc.gov/search/titles/results/?terms=new%20york&amp;format=json'

r = requests.get(url)

# Decode the JSON data into a dictionary: json_data
json_data = r.json()

# Select the first element in the list json_data['items']: nyc_loc
# dict of dict
nyc_loc = json_data['items'][0]

# Print each key-value pair in nyc_loc
for k in nyc_loc.keys():
    print(k + ': ', nyc_loc[k])
</code></pre>

<pre><code>county:  ['New York']
place_of_publication:  New York
oclc:  12928956
subject:  ['New York (N.Y.)--Newspapers.', 'New York (State)--New York.--fast--(OCoLC)fst01204333']
alt_title:  []
title:  The New York thrice-a-week world.
type:  title
edition:  New York and Pennsylvania ed.
id:  /lccn/sn85047837/
note:  ['Democrat.', 'Description based on: Vol. 36, no. 3,670 (Oct. 4, 1895).', 'The words "New York thrice-a-week" appear in title ornament.']
place:  ['New York--New York--New York']
essay:  []
start_year:  1890
end_year:  1999
publisher:  Press Pub. Co.
lccn:  sn85047837
holding_type:  ['Unspecified']
state:  ['New York']
city:  ['New York']
language:  ['English']
country:  New York
title_normal:  new york thrice-a-week world.
url:  http://chroniclingamerica.loc.gov/lccn/sn85047837.json
frequency:  Three times a week
</code></pre>
<ul>
<li>The Wikipedia API.</li>
<li>Documentation: https://www.mediawiki.org/wiki/API:Main_page</li>
<li>Dictionary of dictionary of dictionary.</li>
</ul>
<pre><code class="python">import requests

url = 'https://en.wikipedia.org/w/api.php?action=query&amp;prop=extracts&amp;format=json&amp;exintro=&amp;titles=pizza'

r = requests.get(url)

# Decode the JSON data into a dictionary: json_data
json_data = r.json()

# Print the Wikipedia page extract
pizza_extract = json_data['query']['pages']['24768']['extract']
print(pizza_extract)
</code></pre>

<pre><code>&lt;p&gt;&lt;b&gt;Pizza&lt;/b&gt; is a flatbread generally topped with tomato sauce and cheese and baked in an oven. It is commonly topped with a selection of meats, vegetables and condiments. The term was first recorded in the 10th century, in a Latin manuscript from Gaeta in Central Italy. The modern pizza was invented in Naples, Italy, and the dish and its variants have since become popular in many areas of the world.&lt;/p&gt;
&lt;p&gt;In 2009, upon Italy's request, Neapolitan pizza was safeguarded in the European Union as a Traditional Speciality Guaranteed dish. The Associazione Verace Pizza Napoletana (the True Neapolitan Pizza Association) is a non-profit organization founded in 1984 with headquarters in Naples. It promotes and protects the "true Neapolitan pizza".&lt;/p&gt;
&lt;p&gt;Pizza is sold fresh or frozen, either whole or in portions, and is a common fast food item in Europe and North America. Various types of ovens are used to cook them and many varieties exist. Several similar dishes are prepared from ingredients commonly used in pizza preparation, such as calzone and stromboli.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
</code></pre>
<p><strong>The Twitter API and Authentification</strong></p>
<ul>
<li>Twitter has many APIs: the main API, the REST API, Streaming APIs (private, public), Firehouse (expensive), etc.</li>
<li>Field Guide: https://dev.twitter.com/overview/api/tweets</li>
<li>Consult the documentation to set an authentification key (available online).</li>
</ul>
<p><strong><code>tweepy</code> package</strong></p>
<ul>
<li>The authentication looks like the following:</li>
<li>Code:</li>
</ul>
<pre><code class="python"># Import package
import tweepy, json

# Store OAuth authentication credentials in relevant variables
access_token = &quot;1092294848-aHN7DcRP9B4VMTQIhwqOYiB14YkW92fFO8k8EPy&quot;
access_token_secret = &quot;X4dHmhPfaksHcQ7SCbmZa2oYBBVSD2g8uIHXsp5CTaksx&quot;
consumer_key = &quot;nZ6EA0FxZ293SxGNg8g8aP0HM&quot;
consumer_secret = &quot;fJGEodwe3KiKUnsYJC3VRndj7jevVvXbK2D5EiJ2nehafRgA6i&quot;

# Pass OAuth details to tweepy's OAuth handler
auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token, access_token_secret)
</code></pre>

<p><strong>Start streaming tweets</strong></p>
<ul>
<li>Code:</li>
</ul>
<pre><code class="python"># Initialize Stream listener
l = MyStreamListener()

# Create you Stream object with authentication
stream = tweepy.Stream(auth, l)


# Filter Twitter Streams to capture data by the keywords:
stream.filter(track = ['clinton', 'trump', 'sanders', 'cruz'])
</code></pre>

<ul>
<li>Code of <code>MyStreamListener()</code>:</li>
<li>Creates a file called tweets.txt, collects streaming tweets as .jsons and writes them to the file tweets.txt; once 100 tweets have been streamed, the listener closes the file and stops listening. </li>
</ul>
<pre><code class="python">class MyStreamListener(tweepy.StreamListener):


    def __init__(self, api=None):

        super(MyStreamListener, self).__init__()
        self.num_tweets = 0
        self.file = open(&quot;tweets.txt&quot;, &quot;w&quot;)

    def on_status(self, status):

        tweet = status._json
        self.file.write( json.dumps(tweet) + '\n' )
        tweet_list.append(status)
        self.num_tweets += 1
        if self.num_tweets &lt; 100:
            return True
        else:
            return False
        self.file.close()

    def on_error(self, status):
        print(status)
</code></pre>

<p><strong>Load and explore your Twitter data</strong></p>
<ul>
<li>Code:</li>
</ul>
<pre><code class="python"># Import package
import json

# String of path to file: tweets_data_path
tweets_data_path = 'tweets.txt'

# Initialize empty list to store tweets: tweets_data
tweets_data = []

# Open connection to file
tweets_file = open(tweets_data_path, &quot;r&quot;)

# Read in tweets and store in list: tweets_data
for line in tweets_file:
    tweet = json.loads(line)
    tweets_data.append(tweet)

# Close connection to file
tweets_file.close()

# Print the keys of the first tweet dict
print(tweets_data[0].keys())
</code></pre>

<p><strong>Send the Twitter data to DataFrame</strong></p>
<ul>
<li>Twitter data in a list of dictionaries <code>tweets_data</code>, where each dictionary corresponds to a single tweet. </li>
<li>The text in a tweet <code>t1</code> is stored as the value <code>t1['text']</code>; similarly, the language is stored in <code>t1['lang']</code>. </li>
<li>Code:</li>
</ul>
<pre><code class="python"># Import package
import pandas as pd

# Build DataFrame of tweet texts and languages
df = pd.DataFrame(tweets_data, columns=['text', 'lang'])

# Print head of DataFrame
print(df.head())
</code></pre>

<p><strong>Analyze the tweets (NLP, regex)</strong></p>
<ul>
<li>A little bit of Twitter text analysis and plotting. </li>
<li>Use the statistical data visualization library seaborn: https://stanford.edu/%7Emwaskom/software/seaborn/</li>
<li>Code:</li>
</ul>
<pre><code class="python"># Import the regular expressions library
import re

# The function tells you whether the first argument (a word) occurs within the 2nd argument (a tweet)
def word_in_text(word, tweet):
    word = word.lower()
    text = tweet.lower()
    match = re.search(word, tweet)

    if match:
        return True
    return False

# Initialize list to store tweet counts
[clinton, trump, sanders, cruz] = [0, 0, 0, 0]

# Iterate through df, counting the number of tweets in which
# each candidate is mentioned
for index, row in df.iterrows():
    clinton += word_in_text('clinton', row['text'])
    trump += word_in_text('trump', row['text'])
    sanders += word_in_text('sanders', row['text'])
    cruz += word_in_text('cruz', row['text'])

# Import packages
import matplotlib.pyplot as plt
import seaborn as sns

# Set seaborn style
sns.set(color_codes=True)

# Create a list of labels:cd
cd = ['clinton', 'trump', 'sanders', 'cruz']

# Plot histogram
ax = sns.barplot(cd, [clinton, trump, sanders, cruz])
ax.set(ylabel=&quot;count&quot;)
plt.show()
</code></pre>

<pre><code class="python">from IPython.display import Image
# for the following pictures...
</code></pre>

<pre><code class="python">Image('tweets_figure.png')
</code></pre>

<p><img alt="png" src="../img/importing_data_into_python/output_99_0.png" /></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../DataCamp%20Python%203%20for%20Data%20Science/" class="btn btn-neutral float-right" title="DataCamp Python 3 for Data Science">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../Codecademy%20Python/" class="btn btn-neutral" title="Codecademy Python"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../Codecademy%20Python/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../DataCamp%20Python%203%20for%20Data%20Science/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
