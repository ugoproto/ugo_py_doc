<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Ugo Spark">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Tidy Data in Python - ugo_py_doc</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Tidy Data in Python";
    var mkdocs_page_input_path = "Tidy_Data_in_Python.md";
    var mkdocs_page_url = "/Tidy_Data_in_Python/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> ugo_py_doc</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Basics & More</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../Py_CS/">Python Cheat Sheets</a>
                </li>
                <li class="">
                    
    <a class="" href="../Python_Preliminaries/">Python Preliminaries</a>
                </li>
                <li class="">
                    
    <a class="" href="../Python_Nice_to_Have/">Python Nice to Have</a>
                </li>
                <li class="">
                    
    <a class="" href="../Freeze_the_Code/">Freeze the Code</a>
                </li>
                <li class="">
                    
    <a class="" href="../Decorators/">Decorators</a>
                </li>
                <li class="">
                    
    <a class="" href="../Write_Better_Python/">Write Better Python with PEP</a>
                </li>
                <li class="">
                    
    <a class="" href="../Regex/">Regular Expressions (REGEX)</a>
                </li>
                <li class="">
                    
    <a class="" href="../Databases/">Databases</a>
                </li>
                <li class="">
                    
    <a class="" href="../Datetime/">Datetime</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">SciPy Stack</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../Scipy_CS/">Scipy Stack Cheat Sheets</a>
                </li>
                <li class="">
                    
    <a class="" href="../JN_CS/">Jupyter Notebook Cheat Sheets</a>
                </li>
                <li class="">
                    
    <a class="" href="../Scientific Python (the SciPy Stack)/">Scientific Python (the SciPy Stack)</a>
                </li>
                <li class="">
                    
    <a class="" href="../DataCamp Importing Data into Python 3/">DataCamp Importing Data into Python 3</a>
                </li>
                <li class="">
                    
    <a class="" href="../DataCamp Python 3 for Data Science/">DataCamp Python 3 for Data Science</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Tidy Data in Python</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#2-tidy-vs-messy-data">2, Tidy vs. Messy Data</a></li>
    

    <li class="toctree-l3"><a href="#3-messy-data">3, Messy data</a></li>
    

    <li class="toctree-l3"><a href="#4-using-melt-to-tidy-data">4, Using melt to Tidy Data</a></li>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../Lists/">Lists</a>
                </li>
                <li class="">
                    
    <a class="" href="../IPython Notebook/">IPython Notebook, Collection</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Courses</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../Apprenez a programmer en Python/">Apprenez à programmer en Python</a>
                </li>
                <li class="">
                    
    <a class="" href="../Codecademy Python/">Codecademy Python</a>
                </li>
                <li class="">
                    
    <a class="" href="../Learn Python the Hard Way/">Learn Python the Hard Way</a>
                </li>
                <li class="">
                    
    <a class="" href="../Python Code Snippets/">Python Code Snippets</a>
                </li>
                <li class="">
                    
    <a class="" href="../Introduction to Python/">Introduction to Python</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Manuals</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../Automate the Boring Stuff with Python/">Automate the Boring Stuff with Python</a>
                </li>
                <li class="">
                    
    <a class="" href="../Real_Python/">Real Python</a>
                </li>
                <li class="">
                    
    <a class="" href="../Managing Your Biological Data with Python/">Managing Your Biological Data with Python</a>
                </li>
                <li class="">
                    
    <a class="" href="../Python for Education/">Python for Education</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">ugo_py_doc</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>SciPy Stack &raquo;</li>
        
      
    
    <li>Tidy Data in Python</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <div class="toc"><span class="toctitle">CONTENT</span><ul>
<li><a href="#1-loading">1, Loading</a></li>
<li><a href="#2-tidy-vs-messy-data">2, Tidy vs. Messy Data</a></li>
<li><a href="#3-messy-data">3, Messy data</a></li>
<li><a href="#4-using-melt-to-tidy-data">4, Using melt to Tidy Data</a></li>
</ul>
</div>
<hr />
<p><strong>Foreword</strong></p>
<p>Notes. Python 3.</p>
<hr />
<p>It is often said that data scientists spend only 20% of their time analyzing their data, and 80% of time cleaning it. Indeed, maintaining a tidy, easy-to-use dataset is crucial in our age of big data. In the paper Tidy Data, veteran statistician Hadley Wickham gives definitions of tidy and messy data so that all data scientists can keep their work organized. </p>
<h4 id="1-loading">1, Loading<a class="headerlink" href="#1-loading" title="Permanent link">&para;</a></h4>
<p>First, load all the datasets.</p>
<pre><code class="python">import pandas as pd

messy = pd.read_csv('messy.csv')
df1 = pd.read_csv('df1.csv')
df2 = pd.read_csv('df2.csv')
eyes = pd.read_csv('eyes.csv')
</code></pre>

<h4 id="2-tidy-vs-messy-data">2, Tidy vs. Messy Data<a class="headerlink" href="#2-tidy-vs-messy-data" title="Permanent link">&para;</a></h4>
<p>What exactly marks the difference between tidy data and messy data? It is not only how organized and intuitive the datasets look to our human eyes, but also how easily and efficiently they can be processed by computers. In his seminal paper <a href="https://www.jstatsoft.org/article/view/v059i10">Tidy Data</a>, Hadley Wickham proposed three standards for tidy data:</p>
<ol>
<li>Each variable forms a column</li>
<li>Each observation forms a row</li>
<li>Each type of observation forms a unit.</li>
</ol>
<h4 id="3-messy-data">3, Messy data<a class="headerlink" href="#3-messy-data" title="Permanent link">&para;</a></h4>
<p>To get started, execute <code>messy</code>. This dataset, which appears in Wickham&rsquo;s paper, shows the number of people who choose either of two treatments in a hospital. Observe its structure in comparison with Wickham&rsquo;s rules. This dataset is <em>messy</em> because it violates rule 2: it combines Treatment A and Treatment B, two distinct observations, in a single row.</p>
<pre><code class="python">print(messy.head())
</code></pre>

<pre><code>  First     Last  Treatment A  Treatment B
0  John    Smith          NaN            2
1  Jane      Doe         16.0           11
2  Mary  Johnson          3.0            1
</code></pre>
<p>Now let&rsquo;s look at two more datasets. Execute <code>df1</code> and <code>df2</code> in the shell to check out two other preloaded datasets. The former shows the type and number of pets owned by three co-workers, and the latter shows the average BMI in three countries over several years. </p>
<pre><code class="python">print(df1.head())
</code></pre>

<pre><code>      owner  dogs  cats  birds
0     Jason     2     4      3
1      Lisa     7    10      9
2  Terrence     8     5      1
</code></pre>
<pre><code class="python">print(df2.head())
</code></pre>

<pre><code>       Country     Y1980     Y1981     Y1982     Y1983
0  Afghanistan  21.48678  21.46552  21.45145  21.43822
1      Albania  25.22533  25.23981  25.25636  25.27176
2      Algeria  22.25703  22.34745  22.43647  22.52105
</code></pre>
<p><code>df2</code> is messy because it violates rule 2.</p>
<h4 id="4-using-melt-to-tidy-data">4, Using <code>melt</code> to Tidy Data<a class="headerlink" href="#4-using-melt-to-tidy-data" title="Permanent link">&para;</a></h4>
<p>Its basic syntax is <code>pd.melt(df, id_vars = lst)</code>, where <code>df</code> is the name of the data frame we&rsquo;re dealing with and <code>lst</code> is a list of all the columns that we want to keep as columns. </p>
<pre><code class="python"># Melt df2 into a new data frame: df2_melted
df2_melted = pd.melt(df2, id_vars = 'Country')

# print df2_melted
print(df2_melted)
</code></pre>

<pre><code>        Country variable     value
0   Afghanistan    Y1980  21.48678
1       Albania    Y1980  25.22533
2       Algeria    Y1980  22.25703
3   Afghanistan    Y1981  21.46552
4       Albania    Y1981  25.23981
5       Algeria    Y1981  22.34745
6   Afghanistan    Y1982  21.45145
7       Albania    Y1982  25.25636
8       Algeria    Y1982  22.43647
9   Afghanistan    Y1983  21.43822
10      Albania    Y1983  25.27176
11      Algeria    Y1983  22.52105
</code></pre>
<p><strong>Renaming Columns</strong></p>
<p>Change the column names with pandas&rsquo; rename function. Its syntax is <code>df.rename(columns = d, inplace = False)</code>, where <code>d</code> is a dictionary where the keys are the columns you want to change, and the values are the new names for these columns.</p>
<pre><code class="python"># Rename the columns of df2_melted: df2_tidy
df2_tidy = df2_melted.rename(columns = {'variable': 'Year', 'value': 'Income'})

# Print out df2_tidy
print(df2_tidy)
</code></pre>

<pre><code>        Country   Year    Income
0   Afghanistan  Y1980  21.48678
1       Albania  Y1980  25.22533
2       Algeria  Y1980  22.25703
3   Afghanistan  Y1981  21.46552
4       Albania  Y1981  25.23981
5       Algeria  Y1981  22.34745
6   Afghanistan  Y1982  21.45145
7       Albania  Y1982  25.25636
8       Algeria  Y1982  22.43647
9   Afghanistan  Y1983  21.43822
10      Albania  Y1983  25.27176
11      Algeria  Y1983  22.52105
</code></pre>
<p><strong>More messiness</strong></p>
<p>Execute <code>eyes</code> in the shell. This dataset is about the eye colors of three women and whether or not they wear glasses. What problem does this dataset have?</p>
<pre><code class="python">print(eyes)
</code></pre>

<pre><code>        Name  Brown  Blue  Black Wear_Glasses
0     Esther      0     1      0        False
1  Elizabeth      1     0      0        False
2   Michelle      0     0      1         True
</code></pre>
<p>It violates rule 1 of tidy data: there are several columns that represent the same variable.</p>
<p><strong>Deal with it</strong></p>
<p>Use <code>melt</code>.</p>
<pre><code class="python"># Melt the Black, Blue, and Brown columns of eyes: eyes_melted
eyes_melted = pd.melt(eyes, id_vars = ['Name', 'Wear_Glasses'])

# Rename the variable column and save to eyes_renamed
eyes_renamed = eyes_melted.rename(columns = {'variable': 'Eye_Color'})

# print out eyes_renamed
print(eyes_renamed)
</code></pre>

<pre><code>        Name Wear_Glasses Eye_Color  value
0     Esther        False     Brown      0
1  Elizabeth        False     Brown      1
2   Michelle         True     Brown      0
3     Esther        False      Blue      1
4  Elizabeth        False      Blue      0
5   Michelle         True      Blue      0
6     Esther        False     Black      0
7  Elizabeth        False     Black      0
8   Michelle         True     Black      1
</code></pre>
<p><strong>Further Cleaning</strong></p>
<p>Get rid of all rows whose value in the value column is 0.</p>
<p><code>df1 = df2[df2.column == value]</code></p>
<p>where <code>column</code> is the name of the column we are examining and <code>value</code> is the value we want to keep. This step will give us one row for each girl that tells us only her correct eye color. Now the <code>value</code> column is no longer necessary, so let&rsquo;s delete it:</p>
<p><code>df.drop(lst, axis = 1)</code></p>
<p>Here <code>lst</code> is a list of the columns we want to get rid of, and <code>axis = 1</code> specifies that we want to drop columns instead of rows.</p>
<pre><code class="python"># Filter eyes_ranamed and save to eyes_filtered 
eyes_filtered = eyes_renamed[eyes_renamed.value == 1]

# Delete the `value` column and save to eyes_tidy
eyes_tidy = eyes_filtered.drop(['value'], axis = 1)

# print eyes_tidy
print(eyes_tidy)
</code></pre>

<pre><code>        Name Wear_Glasses Eye_Color
1  Elizabeth        False     Brown
3     Esther        False      Blue
8   Michelle         True     Black
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Lists/" class="btn btn-neutral float-right" title="Lists">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../DataCamp Python 3 for Data Science/" class="btn btn-neutral" title="DataCamp Python 3 for Data Science"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>© Ugo Spark</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../DataCamp Python 3 for Data Science/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../Lists/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
      <script src="../mathjaxhelper.js"></script>

</body>
</html>
